{"remainingRequest":"C:\\Users\\wdh\\Desktop\\vuemall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\wdh\\Desktop\\vuemall\\src\\views\\detail\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\wdh\\Desktop\\vuemall\\src\\views\\detail\\Detail.vue","mtime":1618388835828},{"path":"C:\\Users\\wdh\\Desktop\\vuemall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\wdh\\Desktop\\vuemall\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\wdh\\Desktop\\vuemall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\wdh\\Desktop\\vuemall\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovKiDlhazlhbHnu4Tku7YgKi8NCmltcG9ydCBEZXRhaWxOYXZCYXIgZnJvbSAiLi9jaGlsZENvbXBzL0RldGFpbE5hdkJhciI7DQppbXBvcnQgRGV0YWlsU3dpcGVyIGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxTd2lwZXIiOw0KaW1wb3J0IERldGFpbEJhc2VJbmZvIGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxCYXNlSW5mbyI7DQppbXBvcnQgRGV0YWlsU2hvcEluZm8gZnJvbSAiLi9jaGlsZENvbXBzL0RldGFpbFNob3BJbmZvIjsNCmltcG9ydCBEZXRhaWxHb29kc0luZm8gZnJvbSAiLi9jaGlsZENvbXBzL0RldGFpbEdvb2RzSW5mbyI7DQppbXBvcnQgRGV0YWlsUGFyYW1JbmZvIGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxQYXJhbUluZm8iOw0KaW1wb3J0IERldGFpbENvbW1lbnRJbmZvIGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxDb21tZW50SW5mbyI7DQppbXBvcnQgR29vZHNMaXN0IGZyb20gImNvbXBvbmVudHMvY29udGVudC9nb29kcy9Hb29kc0xpc3QiOw0KaW1wb3J0IERldGFpbEJvdHRvbUJhciBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsQm90dG9tQmFyIjsNCmltcG9ydCBTY3JvbGwgZnJvbSAiY29tcG9uZW50cy9jb21tb24vc2Nyb2xsL1Njcm9sbCI7DQppbXBvcnQgYmFja1RvcCBmcm9tICJjb21wb25lbnRzL2NvbnRlbnQvYmFja3RvcC9iYWNrVG9wIjsNCi8qIOe9kee7nOivt+axgiAqLw0KaW1wb3J0IHsNCiAgZ2V0RGV0YWlsLA0KICBHb29kcywNCiAgU2hvcCwNCiAgR29vZHNQYXJhbXMsDQogIGdldFJlY29tbWVuZCwNCn0gZnJvbSAibmV0d29yay9kZXRhaWwuanMiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJEZXRhaWwiLA0KICBjb21wb25lbnRzOiB7DQogICAgRGV0YWlsTmF2QmFyLA0KICAgIERldGFpbFN3aXBlciwNCiAgICBEZXRhaWxCYXNlSW5mbywNCiAgICBEZXRhaWxTaG9wSW5mbywNCiAgICBEZXRhaWxHb29kc0luZm8sDQogICAgRGV0YWlsUGFyYW1JbmZvLA0KICAgIERldGFpbENvbW1lbnRJbmZvLA0KICAgIERldGFpbEJvdHRvbUJhciwNCiAgICBHb29kc0xpc3QsDQogICAgU2Nyb2xsLA0KICAgIGJhY2tUb3AsDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGlpZDogbnVsbCwNCiAgICAgIHRvcEltYWdlczogW10sDQogICAgICBnb29kczoge30sDQogICAgICBzaG9wOiB7fSwNCiAgICAgIGRldGFpbEluZm86IHt9LA0KICAgICAgcGFyYW1JbmZvOiB7fSwNCiAgICAgIGNvbW1lbnRJbmZvOiB7fSwNCiAgICAgIHJlY29tbWVuZHM6IFtdLA0KICAgICAgdGhlbWVUb3BZczogWzAsIDEwMDAsIDIwMDAsIDMwMDBdLA0KICAgICAgY3VycmVudEluZGV4OiAwLA0KICAgICAgaXNTaG93QmFja1RvcDogZmFsc2UsDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICAvKiDkv53lrZjkvKDlhaXnmoRpaWQgKi8NCiAgICB0aGlzLmlpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5paWQ7DQogICAgLyog5qC55o2uaWlk6K+35rGC6K+m5oOF5pWw5o2uICovDQogICAgZ2V0RGV0YWlsKHRoaXMuaWlkKS50aGVuKChyZXMpID0+IHsNCiAgICAgIGNvbnN0IGRhdGEgPSByZXMucmVzdWx0Ow0KICAgICAgLyogMS7ojrflj5bpobbpg6jova7mkq3lm77mlbDmja4gKi8NCiAgICAgIHRoaXMudG9wSW1hZ2VzID0gZGF0YS5pdGVtSW5mby50b3BJbWFnZXM7DQogICAgICAvKiAyLuiOt+W+l+WVhuWTgeS/oeaBryAqLw0KICAgICAgdGhpcy5nb29kcyA9IG5ldyBHb29kcygNCiAgICAgICAgZGF0YS5pdGVtSW5mbywNCiAgICAgICAgZGF0YS5jb2x1bW5zLA0KICAgICAgICBkYXRhLnNob3BJbmZvLnNlcnZpY2VzDQogICAgICApOw0KICAgICAgY29uc29sZS5sb2codGhpcy5nb29kcykNCiAgICAgIC8qIDMu5Yib5bu65bqX6ZO65L+h5oGv55qE5a+56LGhICovDQogICAgICB0aGlzLnNob3AgPSBuZXcgU2hvcChkYXRhLnNob3BJbmZvKTsNCiAgICAgIC8qIDQu5L+d5a2Y5ZWG5ZOB55qE6K+m5oOF5pWw5o2uICovDQogICAgICB0aGlzLmRldGFpbEluZm8gPSBkYXRhLmRldGFpbEluZm87DQogICAgICAvKiA1LuiOt+W+l+WPguaVsOS/oeaBryAqLw0KICAgICAgdGhpcy5wYXJhbUluZm8gPSBuZXcgR29vZHNQYXJhbXMoDQogICAgICAgIGRhdGEuaXRlbVBhcmFtcy5pbmZvLA0KICAgICAgICBkYXRhLml0ZW1QYXJhbXMucnVsZQ0KICAgICAgKTsNCiAgICAgIC8qIDYu5Y+W5Ye66K+E6K665L+h5oGvICovDQogICAgICBpZiAoZGF0YS5yYXRlLmNSYXRlICE9PSAwKSB7DQogICAgICAgIHRoaXMuY29tbWVudEluZm8gPSBkYXRhLnJhdGUubGlzdFswXTsNCiAgICAgIH0NCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHt9KTsNCiAgICB9KTsNCiAgICAvKiDor7fmsYLmjqjojZDmlbDmja4gKi8NCiAgICBnZXRSZWNvbW1lbmQoKS50aGVuKChyZXMpID0+IHsNCiAgICAgIHRoaXMucmVjb21tZW5kcyA9IHJlcy5kYXRhLmxpc3Q7DQogICAgfSk7DQogIH0sDQogIG1vdW50ZWQoKSB7fSwNCiAgdXBkYXRlZCgpIHt9LA0KICBtZXRob2RzOiB7DQogICAgaW1nTG9hZCgpIHsNCiAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsLnJlZnJlc2goKTsNCiAgICAgIHRoaXMudGhlbWVUb3BZcyA9IFtdOw0KDQogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCgwKTsNCiAgICAgIHRoaXMudGhlbWVUb3BZcy5wdXNoKHRoaXMuJHJlZnMucGFyYW0uJGVsLm9mZnNldFRvcCk7DQogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCh0aGlzLiRyZWZzLmNvbW1lbnQuJGVsLm9mZnNldFRvcCk7DQogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCh0aGlzLiRyZWZzLnJlY29tbWVuZC4kZWwub2Zmc2V0VG9wKTsNCiAgICB9LA0KICAgIHRpdGxlQ2xpY2soaW5kZXgpIHsNCiAgICAgIGNvbnNvbGUubG9nKGluZGV4KTsNCiAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsLnNjcm9sbFRvKDAsIC10aGlzLnRoZW1lVG9wWXNbaW5kZXhdLCAxMDApOw0KICAgIH0sDQogICAgY29udGVudFNjcm9sbChwb3NpdGlvbikgew0KICAgICAgY29uc3QgcG9zaXRpb25ZID0gLXBvc2l0aW9uLnk7DQogICAgICBsZXQgbGVuZ3RoID0gdGhpcy50aGVtZVRvcFlzLmxlbmd0aDsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ICE9PSBpICYmDQogICAgICAgICAgKChpIDwgbGVuZ3RoIC0gMSAmJg0KICAgICAgICAgICAgcG9zaXRpb25ZID49IHRoaXMudGhlbWVUb3BZc1tpXSAmJg0KICAgICAgICAgICAgcG9zaXRpb25ZIDwgdGhpcy50aGVtZVRvcFlzW2kgKyAxXSkgfHwNCiAgICAgICAgICAgIChpID09PSBsZW5ndGggLSAxICYmIHBvc2l0aW9uWSA+PSB0aGlzLnRoZW1lVG9wWXNbaV0pKQ0KICAgICAgICApIHsNCiAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHRoaXMuaXNTaG93QmFja1RvcCA9IE1hdGguYWJzKHBvc2l0aW9uLnkpID4gMTAwMDsNCiAgICB9LA0KICAgIGJhY2tDbGljaygpIHsNCiAgICAgIC8qIDEuc2Nyb2xs6YCa6L+HcmVm54i26K6/6Zeu5a2Q57uE5Lu2ICAyLnNjcm9sbOWxnuaApyAgMy7osIPnlKhzY3JvbGxUb+eahOaWueazlSAqLw0KICAgICAgdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsVG8oMCwgMCwgNTAwKTsNCiAgICB9LA0KICAgIGFkZENhcnQoKSB7Lyog55SodnVleOebkeWQrHByb2R1Y3Tlr7nosaEgKi8NCiAgICAgIC8vMS7ojrflj5botK3nianovabpnIDopoHnmoTlsZXnpLrkv6Hmga8NCiAgICAgIA0KICAgICAgY29uc3QgcHJvZHVjdCA9IHt9Ow0KICAgICAgcHJvZHVjdC5pbWFnZSA9IHRoaXMudG9wSW1hZ2VzWzBdOw0KICAgICAgcHJvZHVjdC50aXRsZSA9IHRoaXMuZ29vZHMudGl0bGU7DQogICAgICBwcm9kdWN0LmRlc2MgPSB0aGlzLmdvb2RzLmRlc2M7DQogICAgICBwcm9kdWN0LnByaWNlID0gdGhpcy5nb29kcy5uZXdQcmljZTsNCiAgICAgIHByb2R1Y3QuaWlkID0gdGhpcy5paWQNCg0KICAgICAgLy8yLuWwhuWVhuWTgea3u+WKoOWIsOi0reeJqei9pumHjA0KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdhZGRDYXJ0Jyxwcm9kdWN0KQ0KICAgICAgDQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYWRkQ2FydCcscHJvZHVjdCkNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/detail","sourcesContent":["<template>\r\n  <div id=\"detail\">\r\n    <detail-nav-bar\r\n      class=\"detailnavbar\"\r\n      @titleClick=\"titleClick\"\r\n    ></detail-nav-bar>\r\n    <scroll\r\n      class=\"content\"\r\n      ref=\"scroll\"\r\n      @scroll=\"contentScroll\"\r\n      :probe-type=\"3\"\r\n    >\r\n      <detail-swiper :topImages=\"topImages\"></detail-swiper>\r\n      <detail-base-info :goods=\"goods\"></detail-base-info>\r\n      <detail-shop-info :shop=\"shop\"></detail-shop-info>\r\n      <detail-goods-info\r\n        :detail-info=\"detailInfo\"\r\n        @imgLoad=\"imgLoad\"\r\n      ></detail-goods-info>\r\n      <detail-param-info\r\n        :param-info=\"paramInfo\"\r\n        ref=\"param\"\r\n      ></detail-param-info>\r\n      <detail-comment-info ref=\"comment\"></detail-comment-info>\r\n      <goods-list :goods=\"recommends\" ref=\"recommend\"></goods-list>\r\n    </scroll>\r\n    <back-top @click.native=\"backClick\" v-show=\"isShowBackTop\"></back-top>\r\n    <detail-bottom-bar @addCart=\"addCart\"></detail-bottom-bar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* 公共组件 */\r\nimport DetailNavBar from \"./childComps/DetailNavBar\";\r\nimport DetailSwiper from \"./childComps/DetailSwiper\";\r\nimport DetailBaseInfo from \"./childComps/DetailBaseInfo\";\r\nimport DetailShopInfo from \"./childComps/DetailShopInfo\";\r\nimport DetailGoodsInfo from \"./childComps/DetailGoodsInfo\";\r\nimport DetailParamInfo from \"./childComps/DetailParamInfo\";\r\nimport DetailCommentInfo from \"./childComps/DetailCommentInfo\";\r\nimport GoodsList from \"components/content/goods/GoodsList\";\r\nimport DetailBottomBar from \"./childComps/DetailBottomBar\";\r\nimport Scroll from \"components/common/scroll/Scroll\";\r\nimport backTop from \"components/content/backtop/backTop\";\r\n/* 网络请求 */\r\nimport {\r\n  getDetail,\r\n  Goods,\r\n  Shop,\r\n  GoodsParams,\r\n  getRecommend,\r\n} from \"network/detail.js\";\r\n\r\nexport default {\r\n  name: \"Detail\",\r\n  components: {\r\n    DetailNavBar,\r\n    DetailSwiper,\r\n    DetailBaseInfo,\r\n    DetailShopInfo,\r\n    DetailGoodsInfo,\r\n    DetailParamInfo,\r\n    DetailCommentInfo,\r\n    DetailBottomBar,\r\n    GoodsList,\r\n    Scroll,\r\n    backTop,\r\n  },\r\n  data() {\r\n    return {\r\n      iid: null,\r\n      topImages: [],\r\n      goods: {},\r\n      shop: {},\r\n      detailInfo: {},\r\n      paramInfo: {},\r\n      commentInfo: {},\r\n      recommends: [],\r\n      themeTopYs: [0, 1000, 2000, 3000],\r\n      currentIndex: 0,\r\n      isShowBackTop: false,\r\n    };\r\n  },\r\n  created() {\r\n    /* 保存传入的iid */\r\n    this.iid = this.$route.params.iid;\r\n    /* 根据iid请求详情数据 */\r\n    getDetail(this.iid).then((res) => {\r\n      const data = res.result;\r\n      /* 1.获取顶部轮播图数据 */\r\n      this.topImages = data.itemInfo.topImages;\r\n      /* 2.获得商品信息 */\r\n      this.goods = new Goods(\r\n        data.itemInfo,\r\n        data.columns,\r\n        data.shopInfo.services\r\n      );\r\n      console.log(this.goods)\r\n      /* 3.创建店铺信息的对象 */\r\n      this.shop = new Shop(data.shopInfo);\r\n      /* 4.保存商品的详情数据 */\r\n      this.detailInfo = data.detailInfo;\r\n      /* 5.获得参数信息 */\r\n      this.paramInfo = new GoodsParams(\r\n        data.itemParams.info,\r\n        data.itemParams.rule\r\n      );\r\n      /* 6.取出评论信息 */\r\n      if (data.rate.cRate !== 0) {\r\n        this.commentInfo = data.rate.list[0];\r\n      }\r\n      this.$nextTick(() => {});\r\n    });\r\n    /* 请求推荐数据 */\r\n    getRecommend().then((res) => {\r\n      this.recommends = res.data.list;\r\n    });\r\n  },\r\n  mounted() {},\r\n  updated() {},\r\n  methods: {\r\n    imgLoad() {\r\n      this.$refs.scroll.refresh();\r\n      this.themeTopYs = [];\r\n\r\n      this.themeTopYs.push(0);\r\n      this.themeTopYs.push(this.$refs.param.$el.offsetTop);\r\n      this.themeTopYs.push(this.$refs.comment.$el.offsetTop);\r\n      this.themeTopYs.push(this.$refs.recommend.$el.offsetTop);\r\n    },\r\n    titleClick(index) {\r\n      console.log(index);\r\n      this.$refs.scroll.scrollTo(0, -this.themeTopYs[index], 100);\r\n    },\r\n    contentScroll(position) {\r\n      const positionY = -position.y;\r\n      let length = this.themeTopYs.length;\r\n      for (let i = 0; i < length; i++) {\r\n        if (\r\n          this.currentIndex !== i &&\r\n          ((i < length - 1 &&\r\n            positionY >= this.themeTopYs[i] &&\r\n            positionY < this.themeTopYs[i + 1]) ||\r\n            (i === length - 1 && positionY >= this.themeTopYs[i]))\r\n        ) {\r\n          this.currentIndex = i;\r\n        }\r\n      }\r\n      this.isShowBackTop = Math.abs(position.y) > 1000;\r\n    },\r\n    backClick() {\r\n      /* 1.scroll通过ref父访问子组件  2.scroll属性  3.调用scrollTo的方法 */\r\n      this.$refs.scroll.scrollTo(0, 0, 500);\r\n    },\r\n    addCart() {/* 用vuex监听product对象 */\r\n      //1.获取购物车需要的展示信息\r\n      \r\n      const product = {};\r\n      product.image = this.topImages[0];\r\n      product.title = this.goods.title;\r\n      product.desc = this.goods.desc;\r\n      product.price = this.goods.newPrice;\r\n      product.iid = this.iid\r\n\r\n      //2.将商品添加到购物车里\r\n      this.$store.commit('addCart',product)\r\n      \r\n      this.$store.dispatch('addCart',product)\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#detail {\r\n  position: relative;\r\n  z-index: 9;\r\n  background-color: #fff;\r\n  height: 100vh;\r\n}\r\n.detailnavbar {\r\n  position: relative;\r\n  z-index: 9;\r\n  background-color: #fff;\r\n}\r\n.content {\r\n  height: calc(100% - 44px);\r\n}\r\n</style>"]}]}