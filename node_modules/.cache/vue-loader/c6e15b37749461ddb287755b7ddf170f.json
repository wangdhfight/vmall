{"remainingRequest":"C:\\Users\\wdh\\Desktop\\Vue商城\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\wdh\\Desktop\\Vue商城\\src\\views\\category\\Category.vue?vue&type=style&index=0&id=1a0c5ce5&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\wdh\\Desktop\\Vue商城\\src\\views\\category\\Category.vue","mtime":1594133809000},{"path":"C:\\Users\\wdh\\Desktop\\Vue商城\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\wdh\\Desktop\\Vue商城\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\wdh\\Desktop\\Vue商城\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\wdh\\Desktop\\Vue商城\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\wdh\\Desktop\\Vue商城\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY2F0ZWdvcnktbmF2LWJhciB7CiAgZm9udC13ZWlnaHQ6IDYwMDsKICBjb2xvcjogd2hpdGU7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmODE5ODsKfQoKLnNjcm9sbC1oZWlnaHQgewogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6IDQ0cHg7CiAgcmlnaHQ6IDA7CiAgYm90dG9tOiA1MHB4OwogIGxlZnQ6IDEwMHB4OwogIG92ZXJmbG93OiBoaWRkZW47Cn0K"},{"version":3,"sources":["Category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Category.vue","sourceRoot":"src/views/category","sourcesContent":["<template>\n  <div class=\"category\">\n    <nav-bar class=\"category-nav-bar\">\n      <div slot=\"center\">商品分类</div>\n    </nav-bar>\n    <slide-bar :slide-bar-list=\"categoryList\" @slideBarItemClick=\"slideBarItemClick\" />\n    <scroll class=\"scroll-height\">\n      <subcategory :category-list=\"subcategoryList\" />\n      <tab-control :titles=\"titleList\" @tabClick=\"tabClick\" ref=\"tabControl\" />\n      <goods-list :goods=\"categoryDetailList\" :goods-height=\"false\" />\n    </scroll>\n  </div>\n</template>\n\n<script>\nimport SlideBar from \"./children/SlideBar\";\nimport NavBar from \"@/components/common/navbar/NavBar\";\nimport { getCategory, getCategoryDetail, getSubcategory } from \"@/network/category\";\nimport Subcategory from \"./children/Subcategory\";\nimport Scroll from \"@/components/common/scroll/Scroll\";\nimport TabControl from \"@/components/content/tabControl/TabControl\";\nimport GoodsList from \"@/components/content/goods/GoodsList\";\n\nexport default {\n  name: \"Category\",\n  data() {\n    return {\n      // 分类内容数据\n      subcategoryList: [],\n      categoryDetailList: [],\n      // 分类侧边栏数据\n      categoryList: [],\n      titleList: [\"流行\", \"新款\", \"精选\"],\n      currentIndex: 0\n    };\n  },\n  components: { GoodsList, TabControl, Scroll, Subcategory, NavBar, SlideBar },\n  methods: {\n    slideBarItemClick({ maitKey, index }) {\n      // 防止反复请求\n      if (this.currentIndex === index) return;\n      this.currentIndex = index;\n      // 每次切换分类初始化tabControl的下标\n      this.$refs.tabControl.curIndex = 0;\n      // 请求对应的推荐列表\n      this.getCategoryDetail(this.categoryList[this.currentIndex].miniWallkey, \"pop\");\n      this.getSubcategory(maitKey);\n    },\n    getCategory() {\n      getCategory().then(res => {\n        // console.log(res.data.category.list);\n        this.categoryList = res.data.category.list;\n        this.$nextTick(() => {\n          this.getSubcategory(this.categoryList[0].maitKey);\n          this.getCategoryDetail(this.categoryList[0].miniWallkey, \"pop\");\n        });\n      });\n    },\n    getSubcategory(key) {\n      getSubcategory(key).then(res => {\n        // console.log(res.data.list);\n        this.subcategoryList = [...res.data.list];\n      });\n    },\n    getCategoryDetail(key, type) {\n      getCategoryDetail(key, type).then(res => {\n        // console.log(res);\n        this.categoryDetailList = [...res];\n      });\n    },\n    tabClick(index) {\n      const typeList = [\"pop\", \"new\", \"sell\"];\n      // 切换类型数据\n      this.getCategoryDetail(this.categoryList[this.currentIndex].miniWallkey, typeList[index]);\n    }\n  },\n  created() {\n    this.getCategory();\n  },\n  activated() {\n    this.$store.commit(\"setLoading\", true);\n  }\n};\n</script>\n\n<style scoped>\n.category-nav-bar {\n  font-weight: 600;\n  color: white;\n  background-color: #ff8198;\n}\n\n.scroll-height {\n  position: fixed;\n  top: 44px;\n  right: 0;\n  bottom: 50px;\n  left: 100px;\n  overflow: hidden;\n}\n</style>\n"]}]}